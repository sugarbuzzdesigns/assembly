/* repo: assembly/ - Package Version: 1.0.0 - 2017-03-06 02:39 pm - User: Phoydar */
var assembly=assembly||{};!function($){assembly.contact={init:function(){this.$landingSection=$(".landing"),this.landingSectionHeight=this.$landingSection.outerHeight(!0),this.$addPhotoSection=$(".add-photo"),this.$pagerCurrent=$(".pager .current"),this.$photosToAdd=$(".add-photo-overlay .image"),this.$addphotoButton=$(".add-photo-overlay .add-photo-btn"),this.$addPhotoIcon=$(".open-add-images"),this.$photoOverlayWrap=$(".photo-overlay-wrap"),this.photoOverlayWrapHeight=0,this.$addedPhotosList=$(".photos-wrap .photos"),this.addedPhotosArray=[],this.photosListCarouselCurSlide="",this.addPhotosCarouselCurSlide="",this.initContactForm(),this.initCarousels(),this.bindEvents(),this.setInitialSectionHeights(),this.setInitialSectionWidths()},bindEvents:function(){var _this=this;$("form button").on("click",function(){_this.validField($(this).closest("form").find(".active input").val())?(_this.showNextFormInput($(this).closest("form").find(".active")),$("form .error-message").hide()):$("form .error-message").show()}),$("form").on("submit",function(evt){evt.preventDefault(),alert("form subitted!")}),_this.$photoOverlayWrap.find(".close-btn").on("click",function(){_this.closeAddContactPhotoWrap()}),_this.$addPhotoIcon.on("click",function(){_this.openAddContactPhotoWrap()}),_this.$addphotoButton.on("click",function(evt){evt.preventDefault(),_this.addPhotoToPhotosList(_this.addPhotosCarouselCurSlide.find(".image").data("photo-id"))}),_this.$photosToAdd.on("click",function(evt){evt.preventDefault(),$(this).is(".added")?_this.removePhotoFromPhotosList($("#"+$(this).data("photo-id"))):_this.addPhotoToPhotosList($(this).data("photo-id"))}),_this.$addPhotosCarousel.on("changed.owl.carousel",function(event){_this.setCurrentCarouselSlide("addPhotosCarouselCurSlide",$(this).data("owl.carousel").items()[event.item.index])}),$(".remove-photo").on("click",function(evt){evt.preventDefault(),_this.removePhotoFromPhotosList($(this).parent())}),$(".image .remove").on("click",function(evt){evt.preventDefault(),evt.stopPropagation(),_this.removePhotoFromPhotosList($("#"+$(this).closest(".image").data("photo-id")))})},setInitialSectionHeights:function(){this.$photoOverlayWrap.data("originalHeight",this.photoOverlayWrapHeight),this.$photoOverlayWrap.css({height:0})},setInitialSectionWidths:function(){var $track=$(".add-photo .inner"),addImagesWidth=$(".open-add-images").outerWidth(!0);$track.width(addImagesWidth)},initCarousels:function(){var _this=this;_this.$addPhotosCarousel=$(".add-photos-carousel"),_this.$addPhotosCarousel.on("initialized.owl.carousel",function(){_this.setCurrentCarouselSlide("addPhotosCarouselCurSlide",$(this).find(".owl-item").eq(0)),$(".add-photos-carousel-wrap").find("nav .arrow-right").on("click",function(){_this.$addPhotosCarousel.data("owl.carousel").next()}),$(".add-photos-carousel-wrap").find("nav .arrow-left").on("click",function(){_this.$addPhotosCarousel.data("owl.carousel").prev()}),_this.photoOverlayWrapHeight=_this.$photoOverlayWrap.outerHeight(!0)}),_this.$addPhotosCarousel.on("changed.owl.carousel",function(evt){evt.relatedTarget.options.slideBy,evt.item.index,evt.item.count;0===evt.page.index&&$(".add-photos-carousel-wrap").find("nav .arrow-left").addClass("disabled"),0===evt.page.index&&$(".add-photos-carousel-wrap").find("nav .arrow-left").addClass("disabled")}),_this.$addPhotosCarousel.owlCarousel({mouseDrag:!1,pullDrag:!1,responsive:{0:{items:1,stagePadding:50},600:{items:2,stagePadding:0},768:{items:3,stagePadding:0},1030:{items:5,stagePadding:0}}})},openAddContactPhotoWrap:function(){this.$photoOverlayWrap.css({height:this.photoOverlayWrapHeight}),this.$landingSection.css({marginTop:-this.landingSectionHeight})},closeAddContactPhotoWrap:function(){this.$photoOverlayWrap.css({height:0}),this.$landingSection.css({marginTop:0})},setCurrentCarouselSlide:function(sliderName,slide){this[sliderName]=slide,slide.find(".image").is(".added")?$(".add-photo-btn").addClass("disabled"):$(".add-photo-btn").removeClass("disabled")},initContactForm:function(){var formFields=$("form label"),numFormFields=formFields.length,$cur=this.$pagerCurrent,$total=$(".pager .total");$cur.html("1"),$total.html(numFormFields)},validField:function(fieldValue){return!0},showNextFormInput:function($currentInput){var curIndex=$currentInput.index()+1;return $("form button").is(".submit")?void $("form").submit():void(curIndex===$("form label").length||(this.$pagerCurrent.html(curIndex+1),$currentInput.removeClass("active"),$currentInput.next().addClass("active"),$("form button .resting").text("submit"),$("form button .hover .inner").text("submit"),$("form button").addClass("submit")))},addPhotoToPhotosList:function(photoId){var newWidth,photoId=($(".photos-wrap .photo").length,photoId);$("#"+photoId).outerWidth(!0),$(".add-photo .inner").width();return newWidth=Math.ceil($(".add-photo .inner").width())+Math.ceil($("#"+photoId).outerWidth(!0)),$.inArray(photoId,this.addedPhotosArray)!==-1?void alert("You've already added this photo"):($('[data-photo-id="'+photoId+'"]').addClass("added"),$("#"+photoId).addClass("show"),$(".add-photo .inner").width(newWidth),this.addedPhotosArray.push(photoId),void $(".add-photo-btn").addClass("disabled"))},removePhotoFromPhotosList:function($photo){$photo.removeClass("show"),$('[data-photo-id="'+$photo.attr("id")+'"]').removeClass("added");var newWidth=Math.ceil($(".add-photo .inner").outerWidth())-Math.ceil($photo.outerWidth(!0));$(".add-photo .inner").width(newWidth),$(".add-photo-btn").removeClass("disabled"),this.addedPhotosArray.splice($.inArray($photo.attr("id"),this.addedPhotosArray),1)}},$(function(){assembly.contact.init()})}(jQuery);